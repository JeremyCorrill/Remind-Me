<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Reminder App</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
<!-- HOMEPAGE VIEW - Mode Selection -->
<div id="homepageView" class="view active">
    <h1>Welcome to Reminder App</h1>
    <p class="subtitle">Choose your mode to get started</p>

    <div class="mode-selection">
        <div class="mode-card" data-mode="work">
            <div class="mode-icon">üíº</div>
            <h2>Work Mode</h2>
            <p>Professional task management with customizable notifications and project tracking</p>
            <ul class="mode-features">
                <li>Customizable reminder delivery</li>
                <li>Project-based organization</li>
                <li>Collaboration features</li>
                <li>Progress tracking</li>
            </ul>
        </div>

        <div class="mode-card" data-mode="adhd">
            <div class="mode-icon">‚ö°</div>
            <h2>ADHD Mode</h2>
            <p>Focus-friendly design with escalating reminders and positive reinforcement</p>
            <ul class="mode-features">
                <li>Escalating reminders</li>
                <li>Celebration animations</li>
                <li>Color-coded priorities</li>
                <li>Streak tracking</li>
            </ul>
        </div>

        <div class="mode-card" data-mode="memory">
            <div class="mode-icon">üß†</div>
            <h2>Memory/Caregiver Mode</h2>
            <p>Supportive reminders with photos, voice cues, and caregiver connection</p>
            <ul class="mode-features">
                <li>Photo + voice reminders</li>
                <li>Large text display</li>
                <li>Caregiver oversight</li>
                <li>Auto-replay prompts</li>
            </ul>
        </div>
    </div>
</div>

<!-- MAIN APP VIEW -->
<div id="mainAppView" class="view">
    <!-- Navigation Tabs -->
    <div class="nav-tabs">
        <button class="nav-tab active" data-tab="reminders">üìã Reminders</button>
        <button class="nav-tab" data-tab="completed">‚úÖ Completed</button>
        <button class="nav-tab" data-tab="analytics">üìä Analytics</button>
        <button class="settings-btn-tab" id="settingsBtnTab">‚öôÔ∏è</button>
    </div>

    <!-- REMINDERS TAB -->
    <div id="remindersTab" class="tab-content active">
        <div class="header">
            <h1 id="modeTitle">Reminder App</h1>
            <div class="header-actions">
                <button class="icon-btn" id="filterBtn" title="Filter">üîç</button>
                <button class="icon-btn" id="exportBtn" title="Export">üì•</button>
            </div>
        </div>

        <!-- Filter Section -->
        <div id="filterSection" class="filter-section" style="display: none;">
            <h3>Filter Reminders</h3>
            <select id="filterPriority" onchange="applyFilters()">
                <option value="all">All Priorities</option>
                <option value="high">High Priority</option>
                <option value="medium">Medium Priority</option>
                <option value="low">Low Priority</option>
            </select>
            <select id="filterProject" onchange="applyFilters()">
                <option value="all">All Projects</option>
            </select>
            <button onclick="clearFilters()">Clear Filters</button>
        </div>

        <!-- Reminder Input Section -->
        <div class="input-section">
            <h2>Create New Reminder</h2>

            <label for="title">Title:</label>
            <input type="text" id="title" placeholder="Enter title">

            <label for="text">Description:</label>
            <textarea id="text" placeholder="Enter reminder details" rows="3"></textarea>

            <label for="datetime">Due Date & Time:</label>
            <input type="datetime-local" id="datetime">

            <!-- Work Mode: Project Selection -->
            <div id="projectSection" style="display: none;">
                <label for="project">Project:</label>
                <select id="project">
                    <option value="none">No Project</option>
                    <option value="work">Work</option>
                    <option value="personal">Personal</option>
                    <option value="urgent">Urgent</option>
                </select>
            </div>

            <!-- Priority selector (Work/ADHD modes) -->
            <div id="prioritySection" style="display: none;">
                <label for="priority">Priority:</label>
                <select id="priority">
                    <option value="low">Low Priority</option>
                    <option value="medium" selected>Medium Priority</option>
                    <option value="high">High Priority</option>
                </select>
            </div>

            <label for="repeatInterval">Repeat every (minutes, optional):</label>
            <input type="number" id="repeatInterval" placeholder="Leave blank for one-time reminder">

            <!-- ADHD Mode: Escalation Settings -->
            <div id="adhdEscalation" style="display: none;">
                <label for="escalationLevel">Escalation Intensity:</label>
                <select id="escalationLevel">
                    <option value="gentle">Gentle (2 reminders)</option>
                    <option value="moderate" selected>Moderate (3 reminders)</option>
                    <option value="strong">Strong (5 reminders)</option>
                </select>
            </div>

            <!-- Memory Mode: Photo/Voice options -->
            <div id="memoryOptions" style="display: none;">
                <label for="photoUpload">Add Photo (optional):</label>
                <input type="file" id="photoUpload" accept="image/*" onchange="handlePhotoUpload(event)">
                <div id="photoPreview"></div>

                <label>Voice Note (optional):</label>
                <button id="recordVoiceBtn" type="button" onclick="toggleVoiceRecording()">üé§ Record Voice Note</button>
                <div id="voiceStatus"></div>

                <label>
                    <input type="checkbox" id="requireAcknowledgment">
                    Require acknowledgment (repeats until acknowledged)
                </label>
            </div>

            <!-- Sharing Options -->
            <div id="sharingSection" style="display: none;">
                <h3>Share This Reminder</h3>
                <label for="shareWith">Share with:</label>
                <input type="text" id="shareWith" placeholder="Enter email or name">
                <select id="sharePermission">
                    <option value="view">View Only</option>
                    <option value="edit">Can Edit</option>
                    <option value="complete">Can Complete</option>
                </select>
                <button type="button" onclick="addSharing()">Add</button>
                <div id="sharingList"></div>
            </div>

            <button id="scheduleBtn" onclick="scheduleReminder()">Schedule Reminder</button>
        </div>

        <!-- Active Reminders List -->
        <div class="reminders-container">
            <h2>Active Reminders <span id="reminderCount" class="count-badge">0</span></h2>
            <div class="view-controls">
                <button onclick="toggleFocusMode()" id="focusModeBtn">üéØ Focus Mode</button>
                <button onclick="sortReminders('priority')">Sort by Priority</button>
                <button onclick="sortReminders('date')">Sort by Date</button>
            </div>
            <ul id="reminderList"></ul>
        </div>
    </div>

    <!-- COMPLETED TAB -->
    <div id="completedTab" class="tab-content">
        <h2>Completed Today ‚úÖ</h2>
        <div class="stats-summary">
            <div class="stat-card">
                <h3 id="todayCount">0</h3>
                <p>Today</p>
            </div>
            <div class="stat-card">
                <h3 id="weekCount">0</h3>
                <p>This Week</p>
            </div>
            <div class="stat-card" id="streakCard" style="display: none;">
                <h3 id="streakCount">0</h3>
                <p>üî• Day Streak</p>
            </div>
        </div>
        <ul id="completedList"></ul>

        <h3>History</h3>
        <div class="history-controls">
            <input type="date" id="historyDate" onchange="loadHistory()">
            <button onclick="clearHistory()">Clear History</button>
        </div>
        <ul id="historyList"></ul>
    </div>

    <!-- ANALYTICS TAB -->
    <div id="analyticsTab" class="tab-content">
        <h2>üìä Progress Analytics</h2>

        <div class="analytics-overview">
            <div class="stat-card">
                <h3 id="totalCompleted">0</h3>
                <p>Total Completed</p>
            </div>
            <div class="stat-card">
                <h3 id="completionRate">0%</h3>
                <p>Completion Rate</p>
            </div>
            <div class="stat-card">
                <h3 id="avgPerDay">0</h3>
                <p>Avg Per Day</p>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="chart-container">
            <h3>Completion Trend (Last 7 Days)</h3>
            <canvas id="trendChart"></canvas>
        </div>

        <div class="chart-container">
            <h3>By Priority</h3>
            <div id="priorityBreakdown"></div>
        </div>

        <div class="chart-container" id="projectBreakdown" style="display: none;">
            <h3>By Project</h3>
            <div id="projectStats"></div>
        </div>

        <!-- ADHD Specific Analytics -->
        <div id="adhdAnalytics" style="display: none;">
            <h3>‚ö° Focus Analytics</h3>
            <div class="analytics-overview">
                <div class="stat-card">
                    <h3 id="focusStreak">0</h3>
                    <p>Focus Streak</p>
                </div>
                <div class="stat-card">
                    <h3 id="bestDay">-</h3>
                    <p>Best Day</p>
                </div>
            </div>
        </div>

        <!-- Caregiver Analytics -->
        <div id="caregiverAnalytics" style="display: none;">
            <h3>üß† Caregiver Insights</h3>
            <div class="analytics-overview">
                <div class="stat-card">
                    <h3 id="adherenceRate">0%</h3>
                    <p>Adherence Rate</p>
                </div>
                <div class="stat-card">
                    <h3 id="missedCount">0</h3>
                    <p>Missed Tasks</p>
                </div>
            </div>
            <button onclick="generateReport()">üìÑ Generate Report</button>
        </div>
    </div>
</div>

<!-- SETTINGS MODAL -->
<div id="settingsModal" class="modal">
    <div class="modal-content">
        <h3>Settings</h3>

        <label>Current Mode:</label>
        <p id="currentMode" style="font-weight: bold; margin-bottom: 15px;">None</p>

        <button onclick="changeMode()" class="change-mode-btn">Change Mode</button>

        <hr style="margin: 20px 0;">

        <h4>Notification Settings</h4>
        <label>
            <input type="checkbox" id="soundEnabled" checked>
            Enable Sound
        </label>
        <label>
            <input type="checkbox" id="vibrationEnabled" checked>
            Enable Vibration
        </label>

        <h4>Display Settings</h4>
        <label for="fontSize">Font Size:</label>
        <select id="fontSize" onchange="changeFontSize()">
            <option value="normal">Normal</option>
            <option value="large">Large</option>
            <option value="xlarge">Extra Large</option>
        </select>

        <div class="modal-buttons">
            <button onclick="closeSettings()">Close</button>
        </div>
    </div>
</div>

<!-- EDIT REMINDER MODAL -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <h3>Edit Reminder</h3>

        <label for="editTitle">Title:</label>
        <input type="text" id="editTitle">

        <label for="editText">Description:</label>
        <textarea id="editText" rows="3"></textarea>

        <label for="editDatetime">Due Date & Time:</label>
        <input type="datetime-local" id="editDatetime">

        <label for="editRepeatInterval">Repeat every (minutes):</label>
        <input type="number" id="editRepeatInterval">

        <div id="editPrioritySection" style="display: none;">
            <label for="editPriority">Priority:</label>
            <select id="editPriority">
                <option value="low">Low Priority</option>
                <option value="medium">Medium Priority</option>
                <option value="high">High Priority</option>
            </select>
        </div>

        <div id="editProjectSection" style="display: none;">
            <label for="editProject">Project:</label>
            <select id="editProject">
                <option value="none">No Project</option>
                <option value="work">Work</option>
                <option value="personal">Personal</option>
                <option value="urgent">Urgent</option>
            </select>
        </div>

        <div class="modal-buttons">
            <button id="cancelEditBtn" onclick="cancelEdit()">Cancel</button>
            <button id="saveEditBtn" onclick="saveEdit()">Save</button>
        </div>
    </div>
</div>

<!-- CELEBRATION MODAL (ADHD Mode) -->
<div id="celebrationModal" class="modal celebration-modal">
    <div class="modal-content celebration-content">
        <div class="confetti">üéâ</div>
        <h2 id="celebrationTitle">Amazing Work!</h2>
        <p id="celebrationMessage">You completed a task!</p>
        <div class="streak-display" id="streakDisplay" style="display: none;">
            <h3>üî• <span id="celebrationStreak">0</span> Day Streak!</h3>
        </div>
        <button onclick="closeCelebration()">Continue</button>
    </div>
</div>

<!-- ESCALATION ALERT MODAL (ADHD Mode) -->
<div id="escalationModal" class="modal escalation-modal">
    <div class="modal-content escalation-content">
        <h2>‚ö° Reminder Alert</h2>
        <p id="escalationMessage"></p>
        <div class="escalation-actions">
            <button onclick="snoozeEscalation()" class="snooze-btn">Snooze 5 min</button>
            <button onclick="acknowledgeEscalation()" class="ack-btn">Got it!</button>
        </div>
    </div>
</div>

<!-- SHARE MODAL -->
<div id="shareModal" class="modal">
    <div class="modal-content">
        <h3>Share Reminder</h3>
        <p>Share "<span id="shareReminderTitle"></span>" with:</p>

        <label for="shareEmail">Email or Username:</label>
        <input type="text" id="shareEmail" placeholder="Enter email">

        <label for="sharePermissionModal">Permission Level:</label>
        <select id="sharePermissionModal">
            <option value="view">View Only</option>
            <option value="edit">Can Edit</option>
            <option value="complete">Can Complete</option>
        </select>

        <div class="modal-buttons">
            <button onclick="closeShareModal()">Cancel</button>
            <button onclick="confirmShare()">Share</button>
        </div>
    </div>
</div>

<!-- Cordova Scripts -->
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="js/work.js"></script>
<script type="text/javascript" src="js/adhd.js"></script>
<script type="text/javascript" src="js/memory.js"></script>
</body>
</html>