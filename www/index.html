<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Reminder App</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
<!-- ONBOARDING VIEW (Week 9) -->
<div id="onboardingView" class="view">
    <div class="onboarding-container">
        <div class="onboarding-progress">
            <div class="progress-bar">
                <div class="progress-fill" id="onboardingProgress"></div>
            </div>
            <span id="onboardingStep">Step 1 of 5</span>
        </div>

        <div class="onboarding-content" id="onboardingContent">
            <!-- Dynamic content loaded by JavaScript -->
        </div>

        <div class="onboarding-actions">
            <button id="onboardingSkip" class="btn-secondary">Skip Tutorial</button>
            <button id="onboardingNext" class="btn-primary">Next</button>
        </div>
    </div>
</div>

<!-- HOMEPAGE VIEW - Mode Selection -->
<div id="homepageView" class="view active">
    <h1>Welcome to Reminder App</h1>
    <p class="subtitle">Choose your mode to get started</p>

    <div class="mode-selection">
        <div class="mode-card" data-mode="work">
            <div class="mode-icon">üíº</div>
            <h2>Work Mode</h2>
            <p>Professional task management with customizable notifications and project tracking</p>
            <ul class="mode-features">
                <li>Customizable reminder delivery</li>
                <li>Project-based organization</li>
                <li>Collaboration features</li>
                <li>Progress tracking</li>
            </ul>
        </div>

        <div class="mode-card" data-mode="adhd">
            <div class="mode-icon">‚ö°</div>
            <h2>ADHD Mode</h2>
            <p>Focus-friendly design with escalating reminders and positive reinforcement</p>
            <ul class="mode-features">
                <li>Escalating reminders</li>
                <li>Celebration animations</li>
                <li>Color-coded priorities</li>
                <li>Streak tracking</li>
            </ul>
        </div>

        <div class="mode-card" data-mode="memory">
            <div class="mode-icon">üß†</div>
            <h2>Memory/Caregiver Mode</h2>
            <p>Supportive reminders with photos, voice cues, and caregiver connection</p>
            <ul class="mode-features">
                <li>Photo + voice reminders</li>
                <li>Large text display</li>
                <li>Caregiver oversight</li>
                <li>Auto-replay prompts</li>
            </ul>
        </div>
    </div>
</div>

<!-- PIN LOCK SCREEN (Week 10) -->
<div id="pinLockView" class="view">
    <div class="pin-container">
        <div class="lock-icon">üîí</div>
        <h2>Enter PIN</h2>
        <p>Enter your 4-digit PIN to unlock</p>

        <div class="pin-display">
            <span class="pin-dot" id="pin1"></span>
            <span class="pin-dot" id="pin2"></span>
            <span class="pin-dot" id="pin3"></span>
            <span class="pin-dot" id="pin4"></span>
        </div>

        <div class="pin-keypad">
            <button onclick="enterPin(1)">1</button>
            <button onclick="enterPin(2)">2</button>
            <button onclick="enterPin(3)">3</button>
            <button onclick="enterPin(4)">4</button>
            <button onclick="enterPin(5)">5</button>
            <button onclick="enterPin(6)">6</button>
            <button onclick="enterPin(7)">7</button>
            <button onclick="enterPin(8)">8</button>
            <button onclick="enterPin(9)">9</button>
            <button onclick="clearPin()">Clear</button>
            <button onclick="enterPin(0)">0</button>
            <button onclick="useBiometric()">üëÜ Biometric</button>
        </div>

        <p id="pinError" class="error-message" style="display: none;"></p>
    </div>
</div>

<!-- MAIN APP VIEW -->
<div id="mainAppView" class="view">
    <!-- Navigation Tabs -->
    <div class="nav-tabs">
        <button class="nav-tab active" data-tab="reminders">üìã Reminders</button>
        <button class="nav-tab" data-tab="completed">‚úÖ Completed</button>
        <button class="nav-tab" data-tab="analytics">üìä Analytics</button>
        <button class="settings-btn-tab" id="settingsBtnTab">‚öôÔ∏è</button>
    </div>

    <!-- REMINDERS TAB -->
    <div id="remindersTab" class="tab-content active">
        <div class="header">
            <h1 id="modeTitle">Reminder App</h1>
            <div class="header-actions">
                <button class="icon-btn" id="filterBtn" title="Filter">üîç</button>
                <button class="icon-btn" id="exportBtn" title="Export">üì•</button>
                <button class="icon-btn" id="tutorialBtn" title="Show Tutorial">‚ùì</button>
            </div>
        </div>

        <!-- Filter Section -->
        <div id="filterSection" class="filter-section" style="display: none;">
            <h3>Filter Reminders</h3>
            <select id="filterPriority" onchange="applyFilters()">
                <option value="all">All Priorities</option>
                <option value="high">High Priority</option>
                <option value="medium">Medium Priority</option>
                <option value="low">Low Priority</option>
            </select>
            <button onclick="clearFilters()">Clear Filters</button>
        </div>

        <!-- Mode Filter Section -->
        <div class="mode-filter-section">
            <h3>Filter by Mode</h3>
            <label>
                <input type="checkbox" id="filterWork" checked onchange="applyModeFilters()">
                üíº Work Mode
            </label>
            <label>
                <input type="checkbox" id="filterAdhd" checked onchange="applyModeFilters()">
                ‚ö° ADHD Mode
            </label>
            <label>
                <input type="checkbox" id="filterMemory" checked onchange="applyModeFilters()">
                üß† Memory/Caregiver Mode
            </label>
        </div>

        <!-- Reminder Input Section -->
        <div class="input-section">
            <h2>Create New Reminder</h2>

            <label for="title">Title:</label>
            <input type="text" id="title" placeholder="Enter title">

            <label for="text">Description:</label>
            <textarea id="text" placeholder="Enter reminder details" rows="3"></textarea>

            <label for="datetime">Due Date & Time:</label>
            <input type="datetime-local" id="datetime">

            <!-- Priority selector (Work/ADHD modes) -->
            <div id="prioritySection" style="display: none;">
                <label for="priority">Priority:</label>
                <select id="priority">
                    <option value="low">Low Priority</option>
                    <option value="medium" selected>Medium Priority</option>
                    <option value="high">High Priority</option>
                </select>
            </div>

            <!-- Project selector (Work mode) -->
            <div id="projectSection" style="display: none;">
                <label for="project">Project:</label>
                <select id="project">
                    <option value="none">No Project</option>
                    <option value="work">Work</option>
                    <option value="personal">Personal</option>
                    <option value="urgent">Urgent</option>
                </select>
            </div>

            <label for="repeatInterval">Repeat every (minutes, optional):</label>
            <input type="number" id="repeatInterval" placeholder="Leave blank for one-time reminder">

            <!-- ADHD Mode: Escalation Settings -->
            <div id="adhdEscalation" style="display: none;">
                <label for="escalationLevel">Escalation Intensity:</label>
                <select id="escalationLevel">
                    <option value="gentle">Gentle (2 reminders)</option>
                    <option value="moderate" selected>Moderate (3 reminders)</option>
                    <option value="strong">Strong (5 reminders)</option>
                </select>
            </div>

            <!-- Memory Mode: Photo/Voice options -->
            <div id="memoryOptions" style="display: none;">
                <label for="photoUpload">Add Photo (optional):</label>
                <input type="file" id="photoUpload" accept="image/*" onchange="handlePhotoUpload(event)">
                <div id="photoPreview"></div>

                <label>Voice Note (optional):</label>
                <button id="recordVoiceBtn" type="button" onclick="toggleVoiceRecording()">üé§ Record Voice Note</button>
                <div id="voiceStatus"></div>

                <label>
                    <input type="checkbox" id="requireAcknowledgment">
                    Require acknowledgment (repeats until acknowledged)
                </label>
            </div>

            <button id="scheduleBtn" onclick="scheduleReminder()">Schedule Reminder</button>
        </div>

        <!-- Active Reminders List -->
        <div class="reminders-container">
            <h2>Active Reminders <span id="reminderCount" class="count-badge">0</span></h2>
            <ul id="reminderList"></ul>
        </div>
    </div>

    <!-- COMPLETED TAB -->
    <div id="completedTab" class="tab-content">
        <h2>Completed Tasks ‚úÖ</h2>

        <!-- Completed Filters -->
        <div class="completed-filters">
            <div class="filter-group">
                <h4>Filter by Mode:</h4>
                <label>
                    <input type="checkbox" id="completedFilterWork" checked onchange="filterCompleted()">
                    üíº Work
                </label>
                <label>
                    <input type="checkbox" id="completedFilterAdhd" checked onchange="filterCompleted()">
                    ‚ö° ADHD
                </label>
                <label>
                    <input type="checkbox" id="completedFilterMemory" checked onchange="filterCompleted()">
                    üß† Memory/Caregiver
                </label>
            </div>

            <div class="filter-group">
                <h4>Filter by Date:</h4>
                <input type="date" id="completedDateStart">
                <span>to</span>
                <input type="date" id="completedDateEnd">
                <button onclick="applyDateFilter()" class="btn-secondary">Apply</button>
                <button onclick="clearDateFilter()" class="btn-secondary">Clear</button>
            </div>
        </div>

        <div class="stats-summary">
            <div class="stat-card">
                <h3 id="todayCount">0</h3>
                <p>Today</p>
            </div>
            <div class="stat-card">
                <h3 id="weekCount">0</h3>
                <p>This Week</p>
            </div>
            <div class="stat-card" id="streakCard" style="display: none;">
                <h3 id="streakCount">0</h3>
                <p>üî• Day Streak</p>
            </div>
        </div>

        <ul id="completedList"></ul>
    </div>

    <!-- ANALYTICS TAB -->
    <div id="analyticsTab" class="tab-content">
        <h2>üìä Progress Analytics</h2>

        <!-- Time Range Selector -->
        <div class="analytics-controls">
            <label for="analyticsRange">Time Range:</label>
            <select id="analyticsRange" onchange="refreshAnalytics()">
                <option value="7">Last 7 Days</option>
                <option value="14">Last 14 Days</option>
                <option value="30" selected>Last 30 Days</option>
                <option value="90">Last 90 Days</option>
            </select>
            <button onclick="refreshAnalytics()" class="btn-secondary">üîÑ Refresh</button>
        </div>

        <div class="analytics-overview">
            <div class="stat-card">
                <h3 id="totalCompleted">0</h3>
                <p>Total Completed</p>
            </div>
            <div class="stat-card">
                <h3 id="completionRate">0%</h3>
                <p>Completion Rate</p>
            </div>
            <div class="stat-card">
                <h3 id="avgPerDay">0</h3>
                <p>Avg Per Day</p>
            </div>
            <div class="stat-card">
                <h3 id="mostProductiveDay">-</h3>
                <p>Most Productive Day</p>
            </div>
        </div>

        <!-- Charts -->
        <div class="chart-container">
            <h3>Tasks by Day of Week</h3>
            <canvas id="dayOfWeekChart"></canvas>
        </div>

        <div class="chart-container">
            <h3>Tasks by Mode</h3>
            <canvas id="modeChart"></canvas>
        </div>

        <div class="chart-container">
            <h3>Daily Completion Trend</h3>
            <canvas id="trendChart"></canvas>
        </div>

        <div class="insights-section">
            <h3>üìà Insights</h3>
            <div id="analyticsInsights">
                <!-- Populated by JavaScript -->
            </div>
        </div>
    </div>

<!-- SETTINGS MODAL (Enhanced Week 8) -->
<div id="settingsModal" class="modal">
    <div class="modal-content settings-modal">
        <h3>‚öôÔ∏è Settings</h3>

        <div class="settings-section">
            <h4>Current Mode</h4>
            <p id="currentMode" class="current-mode-display">None</p>
            <button onclick="changeMode()" class="btn-secondary full-width">Change Mode</button>
        </div>

        <div class="settings-section">
            <h4>üé® Appearance (Week 8)</h4>

            <label for="themeSelect">Theme:</label>
            <select id="themeSelect" onchange="changeTheme()">
                <option value="default">Default</option>
                <option value="dark">Dark Mode</option>
                <option value="high-contrast">High Contrast</option>
                <option value="colorblind">Color-blind Friendly</option>
            </select>

            <label for="fontSize">Font Size:</label>
            <select id="fontSize" onchange="changeFontSize()">
                <option value="normal">Normal</option>
                <option value="large">Large</option>
                <option value="xlarge">Extra Large</option>
            </select>
        </div>

        <div class="settings-section">
            <h4>üîî Notifications</h4>
            <label>
                <input type="checkbox" id="soundEnabled" checked onchange="saveSettings()">
                Enable Sound
            </label>
            <label>
                <input type="checkbox" id="vibrationEnabled" checked onchange="saveSettings()">
                Enable Vibration
            </label>
            <label>
                <input type="checkbox" id="voiceGuidance" onchange="saveSettings()">
                Voice Guidance (Text-to-Speech)
            </label>
        </div>

        <div class="settings-section">
            <h4>üîí Security (Week 10)</h4>
            <label>
                <input type="checkbox" id="pinEnabled" onchange="togglePinLock()">
                Enable PIN Lock
            </label>
            <button id="setPinBtn" onclick="setupPin()" style="display: none;" class="btn-secondary">Set PIN</button>
            <button id="changePinBtn" onclick="changePin()" style="display: none;" class="btn-secondary">Change PIN</button>

            <label>
                <input type="checkbox" id="biometricEnabled" onchange="toggleBiometric()">
                Enable Biometric (Fingerprint/Face)
            </label>

            <label>
                <input type="checkbox" id="auditLogEnabled" onchange="saveSettings()">
                Enable Audit Log
            </label>
        </div>

        <div class="settings-section">
            <h4>üìö Help & Tutorial</h4>
            <button onclick="restartTutorial()" class="btn-secondary full-width">Restart Tutorial</button>
            <button onclick="viewAuditLog()" class="btn-secondary full-width">View Audit Log</button>
        </div>

        <div class="settings-section">
            <h4>‚ö†Ô∏è Data Management</h4>
            <button onclick="exportAllData()" class="btn-secondary full-width">Export All Data</button>
            <button onclick="clearAllData()" class="btn-danger full-width">Clear All Data</button>
        </div>

        <div class="modal-buttons">
            <button onclick="closeSettings()" class="btn-primary">Close</button>
        </div>
    </div>
</div>

<!-- EDIT REMINDER MODAL -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <h3>Edit Reminder</h3>

        <label for="editTitle">Title:</label>
        <input type="text" id="editTitle">

        <label for="editText">Description:</label>
        <textarea id="editText" rows="3"></textarea>

        <label for="editDatetime">Due Date & Time:</label>
        <input type="datetime-local" id="editDatetime">

        <label for="editRepeatInterval">Repeat every (minutes):</label>
        <input type="number" id="editRepeatInterval">

        <div id="editPrioritySection" style="display: none;">
            <label for="editPriority">Priority:</label>
            <select id="editPriority">
                <option value="low">Low Priority</option>
                <option value="medium">Medium Priority</option>
                <option value="high">High Priority</option>
            </select>
        </div>

        <!-- COMMENT MODAL -->
        <div id="commentModal" class="modal">
            <div class="modal-content">
                <h3>üí¨ Comments</h3>

                <div id="existingComments" class="existing-comments">
                    <!-- Populated by JavaScript -->
                </div>

                <label for="newCommentText">Add Comment:</label>
                <textarea id="newCommentText" rows="3" placeholder="Enter your comment..."></textarea>

                <div class="modal-buttons">
                    <button onclick="cancelComment()" class="btn-secondary">Cancel</button>
                    <button onclick="saveComment()" class="btn-primary">Add Comment</button>
                </div>
            </div>
        </div>

        <div class="modal-buttons">
            <button id="cancelEditBtn" onclick="cancelEdit()" class="btn-secondary">Cancel</button>
            <button id="saveEditBtn" onclick="saveEdit()" class="btn-primary">Save</button>
        </div>
    </div>
</div>

<!-- CELEBRATION MODAL (ADHD Mode) -->
<div id="celebrationModal" class="modal celebration-modal">
    <div class="modal-content celebration-content">
        <div class="confetti">üéâ</div>
        <h2 id="celebrationTitle">Amazing Work!</h2>
        <p id="celebrationMessage">You completed a task!</p>
        <div class="streak-display" id="streakDisplay" style="display: none;">
            <h3>üî• <span id="celebrationStreak">0</span> Day Streak!</h3>
        </div>
        <button onclick="closeCelebration()" class="btn-primary">Continue</button>
    </div>
</div>

<!-- AUDIT LOG MODAL (Week 10) -->
<div id="auditLogModal" class="modal">
    <div class="modal-content">
        <h3>üìã Audit Log</h3>
        <div id="auditLogContent" class="audit-log-content">
            <!-- Populated by JavaScript -->
        </div>
        <div class="modal-buttons">
            <button onclick="closeAuditLog()" class="btn-primary">Close</button>
            <button onclick="exportAuditLog()" class="btn-secondary">Export Log</button>
        </div>
    </div>
</div>

<!-- Cordova Scripts -->
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="js/work.js"></script>
<script type="text/javascript" src="js/adhd.js"></script>
<script type="text/javascript" src="js/memory.js"></script>
</body>
</html>